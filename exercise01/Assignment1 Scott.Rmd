---
title: "Assignment 1 - Scott"
author: "Gaby Lio"
date: "August 8, 2017"
output: html_document
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

```
## Probability Practice
![](image_01.png)

#### Part A
The fraction of people who answered yes given that they are truthful clickers is 71.43%.

#### Part B
The probability of that someone has the disease given that they test positive is very low, only 19.88%! If they were to implement a universal testing policy for this disease, most people who test positive will not have the disease ~ about 80.12% actually. This would cause chaos, and proves that a universal testing policy for this disease is not recommended.   

## Exploratory Analysis: Green Buildings
First we need to clean up the data a little bit and make sure the categorical variables are changed to factors in R.
```{r, echo=TRUE}
green_data = read.csv('greenbuildings.csv')

green_data$renovated = as.factor(green_data$renovated)
green_data$class_a = as.factor(green_data$class_a)
green_data$class_b = as.factor(green_data$class_b)
green_data$green_rating = as.factor(green_data$green_rating)
green_data$LEED = as.factor(green_data$LEED)
green_data$Energystar = as.factor(green_data$Energystar)
green_data$net = as.factor(green_data$net)
green_data$amenities = as.factor(green_data$amenities)
green_data$green_rating = as.factor(green_data$green_rating)
```


First we plotted to see whether having a green rating on average could charge a higher rent for their building. The plot is below.
```{r, echo=TRUE}
plot(green_data$green_rating, green_data$Rent, xlab='GREEN CERTIFIED', ylab='RENT', col='beige')

```
We found that having a green rating slightly increased the amount of money you would be able to charge tenants for rent. We decided to plot LEED vs. RENT and ENERGYSTAR vs. RENT to see if there was a difference between being LEED or ENERGYSTAR certified vs. not being certified. The results are belw.
```{r, echo=TRUE}
# Compare RENT values vs. being LEED or ENERGYSTAR CERTIFIED 
par(mfrow = c(1,2))
plot(green_data$LEED, green_data$Rent, xlab='LEED CERTIFED', ylab='RENT', col='pink')
plot(green_data$Energystar, green_data$Rent, xlab='ENERGYSTAR CERTIFED', ylab='RENT', col='burlywood')
```

As you can see from the plots above, being LEED certified does not increase the amount you can charge your tenant for rent. The average is actually slightly lower than the average of those buildings who are not LEED certified. In contrast, being ENERGYSTAR certified is advantageous becuase you can charge tenants more for rent than if you were a building that was not ENERGYSTAR certified. 

Nest we tried to see if gas costs were lower, being a green rating certified building.
```{r,echo=TRUE}
plot(green_data$green_rating, green_data$Gas_Costs, xlab='GREEN CERTIFIED', ylab='GAS COSTS', col='beige')

```
As you can see, gas costs for both green certified buildings and non green certified buildings were very low. We decided to look deeper and split the green certified again by LEED and ENERGYSTAR.

```{r, echo=TRUE}
#compare LEEDS vs. ENERGY STAR in Gas costs
par(mfrow = c(1,2))
plot(green_data$LEED, green_data$Gas_Costs, xlab='LEED CERTIFED', ylab='GAS COSTS', col='pink')
plot(green_data$Energystar, green_data$Gas_Costs, xlab='ENERGYSTAR CERTIFED', ylab='GAS COSTS', col='burlywood')
```

From the plots above you can see that if you are ENERGYSTAR certified gas costs are the same as weather you are not and they are low. If you are LEEDS certified though, gas costs are actually higher, thus ENERGYSTAR certified gas costs are lower than LEED certified gas costs.

We followed the same procedure for electricity costs.
```{r,echo=TRUE}
plot(green_data$green_rating, green_data$Electricity_Costs, xlab='GREEN CERTIFIED', ylab='ELECTRIC COSTS', col='beige')

```
We found that if you were a green certified building you had higher electric costs than a building that was not green certified. 

```{r, echo=TRUE}
#compare LEEDS vs. ENERGY STAR in ELECTRICITY COSTS
par(mfrow = c(1,2))
plot(green_data$LEED, green_data$Electricity_Costs, xlab='LEED CERTIFED', ylab='ELECTRIC COSTS', col='pink')
plot(green_data$Energystar, green_data$Electricity_Costs, xlab='ENERGYSTAR CERTIFED', ylab='ELECTRIC COSTS', col='burlywood')
```

Electricity costs are definitely higher in the geographic regions for which ENERGYSTAR certified buildings are located. They are higher than buildings with no certification and also higher than buildings who are LEED certified. LEED certified buildings have lower electricity costs than buildings who are not LEED certified.

```{r, echo=TRUE}

library(lattice)
bwplot(green_data$Rent~green_data$LEED|green_data$class_a, ylab='RENT',  xlab='LEED vs. NOT LEED', main='Rent by Class A and LEED')
```

```{r, echo=TRUE}

library(lattice)
bwplot(green_data$Rent~green_data$Energystar|green_data$class_a, ylab='RENT',  xlab='ENERGYSTAR vs. NOT ENERGYSTAR', main='Rent by Class A and ENERGYSTAR')
```


```{r, echo=TRUE}
library(lattice)
bwplot(green_data$Rent~green_data$LEED|green_data$class_b, ylab='RENT',  xlab='LEED vs. NOT LEED', main='Rent by Class B and LEED')

```
```{r, echo=TRUE}
library(lattice)
bwplot(green_data$Rent~green_data$Energystar|green_data$class_b, ylab='RENT',  xlab='ENERGYSTAR vs. NOT ENERGYSTAR', main='Rent by Class B and ENERGYSTAR')

```
Whether you are a class a building or class b building and Leed certified vs. Energystar certified has really no effect on Rent prices. There is not much variability in the average amount of rent for these categories.



It appears that buildings who have green ratings have less cool days than buildings who do not have green ratings. 
```{r, echo=TRUE}
plot(green_data$green_rating, green_data$cd_total_07, col='blue', xlab='GREEN RATING' , ylab='COOL DAYS')

```
To make sure that this hold true for each seperate green rating, we created box plots of cool days versus LEED and ENERGYSTAR ratings.

```{r, echo=TRUE}

par(mfrow = c(1,2))
plot(green_data$Energystar, green_data$cd_total_07, xlab='ENERGYSTAR', ylab='COOLING DEGREE DAYS', col='blue')
plot(green_data$LEED, green_data$cd_total_07, xlab='LEED', ylab='COOLING DEGREE DAYS', col='blue')

```
From the plots above you can see that those buildings who are ENERGYSTAR certified have less cooling days than LEED certified buildings, therefore using less energy, and having lower demand. Energystar certified buildings also have less cooling days than buildings that are not energystar certified or not leed certified. LEED certified buildings have more cooling days than those who are not LEED certified. 

We followed the same process for heating days.
```{r, echo=TRUE}
plot(green_data$green_rating, green_data$hd_total07 , col='red', xlab='GREEN RATING' , ylab='HEATING DAYS')

```
It appeared that buildings who had green ratings had fewer heating days on average.
```{r, echo=TRUE}

par(mfrow = c(1,2))
plot(green_data$Energystar, green_data$hd_total07, xlab='ENERGYSTAR', ylab='HEATING DEGREE DAYS', col='red')
plot(green_data$LEED, green_data$hd_total07, xlab='LEED', ylab='HEATING DEGREE DAYS', col='red')

```
The same trend can be found when looking at heating days on LEED vs. ENERGYSTAR certified buildings. ENERGYSTAR buildings hace a lot less heating days on average than LEED buildings. Energystar certified buildings also have less heating days than buildings that are not energystar certified or not leed certified. 

```{r, echo=TRUE}
plot(green_data$age, green_data$Rent, xlab='AGE', ylab='RENT')
cor(green_data$size, green_data$Rent)
```
There is not really a linear relationship between age and rent of buildings like one would expect. We can try a lattice plot to see rent vs age grouped by energystar vs. not energystar and leed and not leed certified.
```{r, echo=TRUE}
xyplot(green_data$Rent~green_data$age|green_data$LEED, main='Scatterplots by LEED Certification', ylab='RENT', xlab='age')
```
```{r, echo=TRUE}
xyplot(green_data$Rent~green_data$age|green_data$Energystar, main='Scatterplots by Energystar Certification', ylab='RENT', xlab='age')
```
There is no relationship between age and rent no matter which category a building falls into, be it LEED certified, ENERGYSTAR certified, or not certified. 

We then tried to see how leasing rate was effected by green certified buildings. 
```{r, echo=TRUE}

plot(green_data$green_rating, green_data$leasing_rate, ylab='LEASING RATE', xlab='GREEN CERTIFIED', col='beige')
```
It appears that green certified buildings have higher leasing rates than those who are not green certifeid. We decided to dive deeper and break down green certified into the two respective categories. 

```{r, echo=TRUE}
par(mfrow=c(1,2))
plot(green_data$LEED, green_data$leasing_rate, ylab='LEASING RATE', xlab='LEED CERTIFIED', col='pink')
plot(green_data$Energystar, green_data$leasing_rate, ylab='LEASING RATE', xlab='ENERGYSTAR CERTIFIED', col='burlywood')
```

On average both LEED and Energystar buildings have a higher leasing rate than buildings who are not leed or energystar certified. 

We also tried to see if green certified buildings had more stories than not green certified buildings.
```{r, echo=TRUE}
plot(green_data$green_rating, green_data$stories, xlab='GREEN CERTIFED', ylab='# of STORIES',col='beige')
```
It seems that there may be a a slight increase of number of stories in green certfied buildings.
```{r, echo=TRUE}
par(mfrow = c(1,2))
plot(green_data$LEED, green_data$stories, xlab='LEED CERTIFED', ylab='# of STORIES', col='pink')
plot(green_data$Energystar, green_data$stories, xlab='ENERGYSTAR CERTIFED', ylab='# of STORIES', col='burlywood')
```
It appears that the LEED certified and ENERGYSTAR certified buildings both have more stories than buildings without these certifcations, but only a slight number more.

```{r, echo=TRUE}
library(lattice)
bwplot(green_data$Rent~green_data$renovated|green_data$LEED, ylab='RENT',  xlab='RENOVATED vs. NOT RENOVATED', main='Rent by LEED and RENOVATED')

```

```{r, echo=TRUE}
library(lattice)
bwplot(green_data$Rent~green_data$renovated|green_data$Energystar, ylab='RENT',  xlab='RENOVATED vs. NOT RENOVATED', main='Rent by ENERGYSTAR and RENOVATED')

```
Whether or not either a Energystar certified building or a LEED certified building were renovated seemed to have little to no effect on the rent.

We tried to see if rent was higher for those buildings that had amenities, and then factored in whether they were green certified or not.
```{r, echo=TRUE}
plot(green_data$amenities, green_data$Rent, xlab='AMENITIES', ylab='RENT', col='beige')
```
```{r, echo=TRUE}
library(lattice)
bwplot(green_data$amenities~ 
         green_data$Rent|green_data$green_rating, xlab='AMENITIES', ylab='RENT', main='RENT by AMENITIES AND GREEN RATING')
```
Amenities do not seem to affect RENT. Lastly, we wanted to see if the variable net played a role in the higher rent prices. First we plotted net vs green certifeid to see if most green certified buildings have tenants pay for their utility costs, or if they are included in the quoted prices.

```{r, echo=TRUE}
plot(green_data$net, green_data$Energystar, xlab='ENERGYSTAR', ylab='NET')
plot(green_data$net, green_data$LEED, xlab='LEED', ylab='NET')
plot(green_data$net, green_data$green_rating, xlab='GREEN', ylab='NET')
```
We wanted to run these plots to make sure that the rent was not higher for Energystar/LEED/GREEN buildings becuase they make most of their tenants pay for utilities, in comparison to not green buildings. 

```{r, echo=TRUE}
plot(green_data$net, green_data$Rent, xlab='NET', ylab='RENT', col='beige')

```
From this plot you can see that those who pay their own utilities have a slightly lower rent, which is to be expected than those who do not pay their own utilities. We finished by making a lattice scatterplot of rent by net and green to see how rent is affected by these two variables. 

```{r, echo=TRUE}
bwplot(green_data$Rent~ green_data$net|green_data$green_rating, xlab='NET', ylab='RENT', main='BOXPLOT of RENT by NET and GREEN CERTIFIED')

```
These box plots show us that there is really not much variability in the rent whether you are green certified or not and whether you pay for your own utilities or not. The average rent of each box plot is around the same. It is obvious in both green certified and not green certified buildings that when you are not paying your own utilities rent is a little bit higher in comparison to when you are, but only slightly. 


#### Conclusion
After looking over all of the plots, it is apparent that the Excel Guru on her staff had made a mistake. The Excel guru failed to split the green certified buildings into their particular certifications (LEEDS vs. ENERGYSTAR), when running his anlaysis. This was something we could do easily with plots. 

When we do this you can see that only those buildings who are ENERGYSTAR certified can actually charge higher rent to tenants per square foot. The LEED certified buildings charge less per square foot in terms of rent. This type of pattern can be seen throughout the data. When looking at gas costs for example, buildings who were Energystar certified had lower gas costs than buildings who were LEED certified. The one contrast to this was the electricity costs, where having a Energystar certified building tended to have higher electricity costs than LEED certified buildings and even average buildings with no green certifications. The Class of the building seemed to have no affect on the costs of rent regardless of their certifcation. The same results were found for Age of the builiding as well.

We also found that heating and cooling days were much lower for energystar certified buildings, while leed certified buildings had higher counts of heating and cooling days.It was interesting to see that both LEED and ENERGYSTAR certified buildings had slighly higher leasing rates than buildings without green certifcations.

So the excel guru was right in one aspect, if you make a green certified building, you will have a high occupancy rate no matter the certifcation as long as it is green. This means we would not have a problem finding tenants. The part he was wrong in though was that just being they were green certified they would yield a profit. According to the data it looks like if you must be Energystar certified to make these profits. Energystar has a low amount of cooling days and heating days in comparison to LEED certified buildings, whose average heating and cooling days are above the average of buildings who are not green certified. This means that Energystar buildings use less energy and have a lower demand. Energystar buildings can also charge a higher amount per square foot of rent than buildings without green certifcations, and definitely higher than those with LEED certifications. 

Lastly, we had to make sure these higher rent charges were not due to the fact that Energystar buildings had utilites included in rent, and that is what was inflating the higher rent cost for tenants. We  examined the spineplots and found that utilities did seem to be included in the rent of energystar buildings about 90% of the time, but utlities was included in rent at an even higher percentage for non energystar buildings. Ultimately, this could not be the reason why the rent charges were inflagted if across the board this was the practice. The real estate developer should invest in beoming a green building only if they go for the Energystar certified option. 


